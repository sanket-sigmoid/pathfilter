version: 2.1
setup: true
orbs:
  path-filtering: circleci/path-filtering@0.1.1
  continuation: circleci/continuation@0.2.0
  
parameters:
  manual-workflow-a:
    type: boolean
    default: false 
  manual-workflow-b:
    type: boolean
    default: false
  manual-workflow-c:
    type: boolean
    default: false
  manual-workflow-d:
    type: boolean
    default: false
    
workflows:
  setup:
    jobs:
      - path-filtering/filter:
          name: service
          base-revision: dev
          config-path:  .circleci/workflows.yml
          mapping: |
            dir_a/.* run-workflow-a true
      - path-filtering/filter:
          name: web
          base-revision: main
          config-path:  .circleci/workflows.yml
          mapping: |
            dir_b/.* run-workflow-b true



